#summary A quick guide demonstrating the functionality of PoPoolation using a small sample data set

= Data =

Download the small sample data set: http://popoolation.googlecode.com/files/teaching-data.zip

Unzip the folder

= Software =

Install the following tools:
  * IGV: http://www.broadinstitute.org/igv/
  * bwa: http://bio-bwa.sourceforge.net/bwa.shtml
  * samtools: http://samtools.sourceforge.net/
  * Perl: http://www.perl.org/
  * R: http://www.r-project.org/
  * PoPoolation: http://code.google.com/p/popoolation/


= Quick Tour =

== Lazy man's quick tour ==

copy the following shell script into the unzipped folder 'data' containing the data of the quick guide:

http://popoolation.googlecode.com/files/popool-teaching.sh

enter the folder in the command line and type:

{{{
sh popool-teaching.sh <your-path-to-popoolation>
}}}

eg:
{{{
sh popool-teaching.sh ~/dev/popoolation
}}}

Note: do not provide the character "/" in the end of the path!

  * Check out the resulting files (like the sorted-genewise.pi or the cyp6g1.pdf)
  * Continue with loading the data into the IGV

== Normal quick guide ==

enter the command line and change directory to the folder 'data' mentioned above.

=== Trim reads ===

As a first step trim the reads by quality as shown here

{{{
perl <local-popoolation-installation>/basic-pipeline/trim-fastq.pl --input1 read_1.fastq --input2 read_2.fastq --output trim --quality-threshold 20 --min-length 50
}}}
 
=== Prepare the reference genome ===
The reference genome needs to be prepared:

{{{
mkdir wg
mv dmel-2R-chromosome-r5.22.fasta wg
awk '{print $1}' wg/dmel-2R-chromosome-r5.22.fasta > wg/dmel-2R-short.fa
bwa index wg/dmel-2R-short.fa
}}}

=== Map the trimmed reads to the reference genome ===
{{{
bwa aln wg/dmel-2R-short.fa trim_1 > trim_1.sai
bwa aln wg/dmel-2R-short.fa trim_2 > trim_2.sai
bwa sampe wg/dmel-2R-short.fa trim_1.sai trim_2.sai trim_1 trim_2 > maped.sam
}}}

*NOTE*: As this guide is intented to be as fast as possible this are definitely not the optimal parameters for mapping of the reads; Instead the following parameters would be prefererable : bwa aln -l 100 -o 2 -d 12 -e 12 -n 0.01 wg/dmel-2R-short.fa trim_1 > trim_1.sai